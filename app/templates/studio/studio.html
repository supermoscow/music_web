{% extends 'base.html' %}
{% block content %}
<link rel="stylesheet" href="/static/css/studio/studio.css">
<div class="studio-header" style="display:flex;align-items:center;gap:24px;justify-content:space-between;">
    <div style="display:flex;align-items:center;gap:16px;">
        <div class="studio-settings">
            <button id="studio-settings-btn">â˜°</button>
            <div class="studio-settings-menu" id="studio-settings-menu">
                <button id="new-project-btn">æ–°å»ºå·¥ç¨‹</button>
                <button id="save-project-btn">ä¿å­˜å·¥ç¨‹</button>
                <button id="open-project-btn">æ‰“å¼€å·¥ç¨‹</button>
            </div>
        </div>
    </div>
    <div class="studio-modes" style="display:flex;align-items:center;gap:8px;">
        <button id="select-mode-btn">é€‰æ‹©</button>
        <button id="delete-mode-btn">åˆ é™¤</button>
        <button id="paint-mode-btn">ğŸ¨</button>
    </div>
    <div class="studio-controls" style="display:flex;align-items:center;gap:8px;">
        <button title="å›åˆ°å¼€å¤´">â®ï¸</button>
        <button title="æ’­æ”¾">â–¶ï¸</button>
        <button title="å½•éŸ³">âºï¸</button>
    </div>
    <div style="display:flex;align-items:center;gap:24px;">
        <div class="studio-timer">00:00:00</div>
        <div class="studio-bpm">BPM: <input type="number" value="120" min="40" max="300" style="width:50px;"></div>
        <div class="studio-meter">
            <select id="studio-meter-select">
                <option value="4/4">4/4</option>
                <option value="3/4">3/4</option>
                <option value="6/8">6/8</option>
            </select>
        </div>
        <button id="metronome-btn" title="èŠ‚æ‹å™¨">â±ï¸</button>
    </div>


    <div class="studio-master-volume">
        <label for="studio-master-volume">éŸ³é‡</label>
        <input type="range" id="studio-master-volume" min="0" max="100" value="80">
    </div>
</div>
<div class="studio-main">
    <div class="studio-track-panel">
        <div class="track-panel-timeline-placeholder"></div>
        <div class="studio-track-scroll">
            <div class="track-list"></div>
            <button id="add-track-btn" class="add-track-btn">ï¼‹ æ·»åŠ è½¨é“</button>
            <div id="add-track-menu" style="display:none;position:absolute;left:50px;bottom:60px;background:#23272a;border:1px solid #444;border-radius:4px;z-index:10;">
                <button data-type="audio">éŸ³é¢‘è½¨</button>
                <button data-type="drum">é¼“æœºè½¨</button>
                <button data-type="piano">é’¢ç´è½¨</button>
            </div>
        </div>
    </div>
    <div id="studio-resize-bar" class="studio-resize-bar"></div>
    <div class="studio-arrangement">
          <div class="studio-timeline-scroll">
            <div class="studio-timeline-wrapper"></div>
        </div>
        <div class="studio-arrangement-scroll">
            <div class="arrangement-area"></div>
        </div>

    </div>
    <div class="studio-sound-library" id="studio-sound-library">
        <div class="sound-library-header">
            <span>éŸ³è‰²åº“</span>
            <button id="toggle-sound-library">Ã—</button>
        </div>
        <div class="sound-library-content">
            <div>é’¢ç´</div>
            <div>é¼“æœº</div>
            <div>åˆæˆå™¨</div>
        </div>
    </div>
    <button id="open-sound-library" class="open-sound-library">ğŸ¹</button>
</div> <!-- .studio-main -->
<div class="studio-bottom">
    <div class="studio-bottom-info"></div>
    <div class="studio-bottom-body">
        <div id="studio-bottom-content" class="studio-bottom-content"></div>
        <div class="studio-bottom-tabs">
            <button class="bottom-tab" data-tab="inspector">ğŸ”</button>
            <button class="bottom-tab" data-tab="keyboard">ğŸ¹</button>
            <button class="bottom-tab" data-tab="editor">âœï¸</button>
            <button class="bottom-tab" data-tab="mixer">ğŸšï¸</button>
        </div>
    </div>
</div> <!-- .studio-bottom -->
<script src="/static/js/studio/studio.utils.js"></script>
<script src="/static/js/studio/studio.track.js"></script>
<script src="/static/js/studio/studio.arrangement.js"></script>
<script src="/static/js/studio/studio.controls.js"></script>
<script src="/static/js/studio/studio.drum_machine.js"></script>
<script src="/static/js/studio/studio.instrument.js"></script>
<script src="/static/js/studio/studio.bottom.js"></script>
<script>
// éŸ³è‰²åº“ä¾§è¾¹æ å¼€å…³é€»è¾‘
const soundLibrary = document.getElementById('studio-sound-library');
const openSoundLibraryBtn = document.getElementById('open-sound-library');
const closeSoundLibraryBtn = document.getElementById('toggle-sound-library');
openSoundLibraryBtn.onclick = () => { soundLibrary.style.display = 'block'; openSoundLibraryBtn.style.display = 'none'; };
closeSoundLibraryBtn.onclick = () => { soundLibrary.style.display = 'none'; openSoundLibraryBtn.style.display = 'block'; };
soundLibrary.style.display = 'none';

// æ¨¡å¼åˆ‡æ¢ä¸å…‰æ ‡å˜åŒ–é€»è¾‘
const selectModeBtn = document.getElementById('select-mode-btn');
const deleteModeBtn = document.getElementById('delete-mode-btn');
const paintModeBtn = document.getElementById('paint-mode-btn');
selectModeBtn.addEventListener('click', () => {
    document.body.style.cursor = 'default';
    document.body.classList.add('select-mode');
    document.body.classList.remove('delete-mode', 'paint-mode');
    selectModeBtn.classList.add('active');
    deleteModeBtn.classList.remove('active');
    paintModeBtn.classList.remove('active');
});
deleteModeBtn.addEventListener('click', () => {
    document.body.style.cursor = 'crosshair';
    document.body.classList.add('delete-mode');
    document.body.classList.remove('select-mode', 'paint-mode');
    deleteModeBtn.classList.add('active');
    selectModeBtn.classList.remove('active');
    paintModeBtn.classList.remove('active');
});
paintModeBtn.addEventListener('click', () => {
    document.body.style.cursor = 'crosshair';
    document.body.classList.add('paint-mode');
    document.body.classList.remove('select-mode', 'delete-mode');
    paintModeBtn.classList.add('active');
    selectModeBtn.classList.remove('active');
    deleteModeBtn.classList.remove('active');
});

// åˆå§‹åŒ–ä¸ºé€‰æ‹©æ¨¡å¼
document.body.classList.add('select-mode');
selectModeBtn.classList.add('active');
document.body.style.cursor = 'default';
</script>
<script src="/static/js/studio/studio.metronome.js"></script>
<script src="/static/js/studio/studio.core.js"></script>
<script src="/static/js/studio/studio.dragdrop.js"></script>
{% endblock %}

