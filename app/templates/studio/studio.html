{% extends 'base.html' %}
{% block content %}
<link rel="stylesheet" href="/static/css/studio/studio.css">
<div class="studio-header" style="display:flex;align-items:center;gap:24px;justify-content:space-between;">
    <div style="display:flex;align-items:center;gap:16px;">
        <div class="studio-settings">
            <button id="studio-settings-btn">☰</button>
            <div class="studio-settings-menu" id="studio-settings-menu">
                <button id="new-project-btn">新建工程</button>
                <button id="save-project-btn">保存工程</button>
                <button id="open-project-btn">打开工程</button>
            </div>
        </div>
    </div>
    <div style="display:flex;align-items:center;gap:24px;">
        <div class="studio-timer">00:00:00</div>
        <div class="studio-bpm">BPM: <input type="number" value="120" min="40" max="300" style="width:50px;"></div>
        <div class="studio-meter">
            <select id="studio-meter-select">
                <option value="4/4">4/4</option>
                <option value="3/4">3/4</option>
                <option value="6/8">6/8</option>
            </select>
        </div>
    </div>
    <div class="studio-controls" style="display:flex;align-items:center;gap:8px;">
        <button title="回到开头">⏮️</button>
        <button title="播放">▶️</button>
        <button title="录音">⏺️</button>
    </div>
</div>
<div class="studio-main">
    <div class="studio-track-panel">
        <div class="studio-track-scroll">
            <div class="track-list"></div>
            <button id="add-track-btn" class="add-track-btn">＋ 添加轨道</button>
            <div id="add-track-menu" style="display:none;position:absolute;left:50px;bottom:60px;background:#23272a;border:1px solid #444;border-radius:4px;z-index:10;">
                <button data-type="audio">音频轨</button>
                <button data-type="drum">鼓机轨</button>
                <button data-type="piano">钢琴轨</button>
            </div>
        </div>
    </div>
    <div id="studio-resize-bar" class="studio-resize-bar"></div>
    <div class="studio-arrangement">
          <div class="studio-timeline-scroll">
            <div class="studio-timeline-wrapper"></div>
        </div>
        <div class="studio-arrangement-scroll">
            <div class="arrangement-area"></div>
        </div>

    </div>
    <div class="studio-sound-library" id="studio-sound-library">
        <div class="sound-library-header">
            <span>音色库</span>
            <button id="toggle-sound-library">×</button>
        </div>
        <div class="sound-library-content">
            <div>钢琴</div>
            <div>鼓机</div>
            <div>合成器</div>
        </div>
    </div>
    <button id="open-sound-library" class="open-sound-library">🎹</button>
</div> <!-- .studio-main -->
<div class="studio-bottom">
    <div class="studio-bottom-tabs">
        <button class="bottom-tab" data-tab="inspector">Track Inspector</button>
        <button class="bottom-tab" data-tab="keyboard">Virtual Keyboard</button>
        <button class="bottom-tab" data-tab="editor">编辑器</button>
        <button class="bottom-tab" data-tab="mixer">混音器</button>
        <button id="add-bottom-panel-btn">＋</button>
    </div>
    <div id="studio-bottom-content" class="studio-bottom-content"></div>
</div>
<script src="/static/js/studio/studio.utils.js"></script>
<script src="/static/js/studio/studio.track.js"></script>
<script src="/static/js/studio/studio.arrangement.js"></script>
<script src="/static/js/studio/studio.controls.js"></script>
<script src="/static/js/studio/studio.bottom.js"></script>
<script src="/static/js/studio/studio.core.js"></script>
<script>
// 音色库侧边栏开关逻辑
const soundLibrary = document.getElementById('studio-sound-library');
const openSoundLibraryBtn = document.getElementById('open-sound-library');
const closeSoundLibraryBtn = document.getElementById('toggle-sound-library');
openSoundLibraryBtn.onclick = () => { soundLibrary.style.display = 'block'; openSoundLibraryBtn.style.display = 'none'; };
closeSoundLibraryBtn.onclick = () => { soundLibrary.style.display = 'none'; openSoundLibraryBtn.style.display = 'block'; };
soundLibrary.style.display = 'none';
</script>
{% endblock %}






